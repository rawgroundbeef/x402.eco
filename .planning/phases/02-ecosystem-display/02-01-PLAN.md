---
phase: 02-ecosystem-display
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/EcosystemSection.tsx
  - components/HomeClient.tsx
  - app/page.tsx
autonomous: true

must_haves:
  truths:
    - "Client-Side Integrations category displays entries from JSON files"
    - "Services & Endpoints category displays entries from JSON files"
    - "Infrastructure & Tooling category displays entries from JSON files"
    - "Learning & Community category displays entries from JSON files"
    - "Ecosystem grid loads data at build time (no client-side fetch)"
  artifacts:
    - path: "components/EcosystemSection.tsx"
      provides: "Server component that renders ecosystem grid from JSON data"
      min_lines: 50
    - path: "components/HomeClient.tsx"
      provides: "Client component for interactive state (dialogs, facilitator selection)"
      min_lines: 80
    - path: "app/page.tsx"
      provides: "Server page using EcosystemSection and HomeClient components"
      contains: "EcosystemSection"
  key_links:
    - from: "components/EcosystemSection.tsx"
      to: "lib/ecosystem.ts"
      via: "import getEntriesByCategory"
      pattern: "getEntriesByCategory|getEcosystemByCategory"
    - from: "components/EcosystemSection.tsx"
      to: "lib/types/ecosystem.ts"
      via: "import CATEGORIES"
      pattern: "CATEGORIES"
    - from: "app/page.tsx"
      to: "components/EcosystemSection.tsx"
      via: "component import and render"
      pattern: "EcosystemSection"
    - from: "app/page.tsx"
      to: "components/HomeClient.tsx"
      via: "component import and render"
      pattern: "HomeClient"
---

<objective>
Integrate file-based ecosystem data into the UI by creating a server component that loads JSON entries at build time.

Purpose: Connect Phase 1's data layer to the existing UI, replacing hardcoded ecosystem data with file-based entries. This enables the PR-submittable ecosystem directory.

Output: EcosystemSection.tsx server component, HomeClient.tsx for interactive state, updated page.tsx that renders JSON-based entries.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-data-structure/01-01-SUMMARY.md
@.planning/phases/01-data-structure/01-02-SUMMARY.md
@lib/types/ecosystem.ts
@lib/ecosystem.ts
@app/page.tsx (lines 468-553 - ecosystem section)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create EcosystemSection server component</name>
  <files>components/EcosystemSection.tsx</files>
  <action>
Create a server component that:

1. Imports from lib/ecosystem.ts: `getEntriesByCategory`
2. Imports from lib/types: `CATEGORIES`, `EcosystemEntry`, `CategorySlug`
3. Imports FadeIn components from components/FadeIn.tsx

4. Creates a server component (NO "use client" directive) named `EcosystemSection`:
   - For each category in CATEGORIES array, call `getEntriesByCategory(categoryMeta.slug)` to load entries
   - Store each category's entries for rendering (e.g., in an array of {category, entries} objects)
   - Filter out categories with zero entries before rendering

5. Visual structure to replicate (match current page.tsx lines 468-553):
   - Section with id="ecosystem" and scroll-mt-16
   - Header with "Who's Building" title and description
   - FadeInStagger grid (md:grid-cols-2 lg:grid-cols-3)
   - For each category with entries:
     - FadeInStaggerItem containing:
       - Category title (h3, uppercase, tracking-wide) - use categoryMeta.name
       - Entry cards in space-y-3 div
   - Each entry card is an <a> link with:
     - bg-card border border-border rounded-xl card-hover
     - Entry name (h4), description (p), external link icon
   - Footer with "View Full Directory" link to x402.org

6. Export as named export: `export function EcosystemSection()`

Note: The component must be a server component to use fs-based data loading. The FadeIn components are client components but can be used in server components - they'll hydrate on the client.
  </action>
  <verify>
Run: `pnpm exec tsc --noEmit`
Verify: No TypeScript errors
  </verify>
  <done>
EcosystemSection.tsx exists, exports named function, imports getEntriesByCategory from lib/ecosystem.ts, iterates over CATEGORIES calling getEntriesByCategory for each.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create HomeClient for interactive state</name>
  <files>components/HomeClient.tsx</files>
  <action>
Create a client component that handles all interactive state from the home page:

1. Add "use client" directive at top of file

2. Accept props:
   ```typescript
   interface HomeClientProps {
     facilitators: Facilitator[];
     educationalContent: typeof import("@/lib/data").educationalContent;
   }
   ```

3. Move these pieces from page.tsx into HomeClient:
   - useState for dialogOpen (type: DialogType)
   - useState for featuredFacilitator (type: Facilitator)
   - openDialog and closeDialog functions
   - DialogType type definition

4. Render inside HomeClient:
   - The EducationalDialog component (when dialogOpen is set)
   - The Hero section's InfoButton group (with openDialog handlers)
   - SECTION 3: FACILITATORS (entire section from page.tsx lines 336-463)
     - Includes the featured facilitator chart
     - Includes the facilitator cards grid
     - Includes setFeaturedFacilitator onClick handlers

5. Export as named export: `export function HomeClient({ facilitators, educationalContent }: HomeClientProps)`

This component will be imported by the server page.tsx to handle all client-side interactivity.
  </action>
  <verify>
Run: `pnpm exec tsc --noEmit`
Verify: No TypeScript errors
  </verify>
  <done>
HomeClient.tsx exists with "use client", contains useState hooks for dialogOpen and featuredFacilitator, renders EducationalDialog, hero InfoButtons, and facilitators section.
  </done>
</task>

<task type="auto">
  <name>Task 3: Convert page.tsx to server component</name>
  <files>app/page.tsx</files>
  <action>
Convert page.tsx from client component to server component:

1. Remove "use client" directive from top of file

2. Remove useState import from React (no longer needed)

3. Update imports:
   - Remove `ecosystem` from @/lib/data import
   - Add: `import { EcosystemSection } from "@/components/EcosystemSection";`
   - Add: `import { HomeClient } from "@/components/HomeClient";`

4. Remove from the component:
   - useState hooks (dialogOpen, featuredFacilitator)
   - openDialog/closeDialog functions
   - DialogType type definition

5. Replace SECTION 4: ECOSYSTEM (lines ~468-553) with:
   ```tsx
   {/* ============================================ */}
   {/* SECTION 4: ECOSYSTEM */}
   {/* ============================================ */}
   <EcosystemSection />
   ```

6. Wrap interactive sections with HomeClient:
   - Remove the EducationalDialog render and hero InfoButtons - now in HomeClient
   - Remove SECTION 3: FACILITATORS entirely - now in HomeClient
   - Add HomeClient with props where these sections were:
   ```tsx
   <HomeClient
     facilitators={facilitators}
     educationalContent={educationalContent}
   />
   ```

7. Keep as server-rendered sections:
   - Header (sticky nav)
   - Hero section (except InfoButtons, which are in HomeClient)
   - SECTION 2: RESOURCES & SERVERS
   - SECTION 5: THESIS (but InfoButton inside moves to HomeClient)
   - SECTION 6: GET STARTED

Note: The Hero section structure needs adjustment - the FadeIn with InfoButtons needs to be extracted to HomeClient. Consider rendering HomeClient at the spot where the dialog and hero buttons were, and again where facilitators section was, OR restructure HomeClient to accept children/slots.

Simpler approach: HomeClient renders as a wrapper that includes:
- The dialog
- The hero InfoButtons area
- The facilitators section
And page.tsx passes these sections as slots or just positions HomeClient strategically.
  </action>
  <verify>
Run: `pnpm run build`
Verify: Build succeeds with no errors

Run: `pnpm run dev` then visit http://localhost:3000
Verify: Ecosystem section displays all 4 categories with entries from JSON files
  </verify>
  <done>
- page.tsx is a server component (no "use client")
- Ecosystem section renders entries from JSON files via EcosystemSection
- All 12 entries display across 4 categories
- Interactive features (dialogs, facilitator selection) work via HomeClient
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. **Build verification:**
   ```bash
   pnpm run build
   ```
   Must complete without errors.

2. **Runtime verification:**
   ```bash
   pnpm run dev
   ```
   Visit http://localhost:3000#ecosystem

3. **Category verification:**
   - Client-Side Integrations shows: x402-fetch, LangChain x402, AgentKit
   - Services & Endpoints shows: x402jobs, Memeputer, AgentCloud
   - Infrastructure & Tooling shows: OpenFacilitator, x402-server, x402scan
   - Learning & Community shows: x402.org, Agent Builders Club, Whitepaper

4. **Link verification:**
   - Click any entry - should open correct external URL

5. **Interactive features verification:**
   - Educational dialogs still work
   - Facilitator selection and chart still work
</verification>

<success_criteria>
- [ ] Build completes without errors
- [ ] All 4 ecosystem categories display
- [ ] All 12 JSON entries render correctly
- [ ] Entry links work (open external URLs)
- [ ] Educational dialogs work
- [ ] Facilitator chart/selection works
- [ ] No visual regressions in other sections
</success_criteria>

<output>
After completion, create `.planning/phases/02-ecosystem-display/02-01-SUMMARY.md`
</output>
